---
export interface Props {
  imageUrl: string;
  imageAlt?: string;
  title: string;
  description: string;
  episodeUrl?: string; // Optional: if you want the card to be a link
  ariaLabel?: string; // Optional: for accessibility if it's a link
}

const {
  imageUrl,
  imageAlt = "Podcast episode thumbnail",
  title,
  description,
  episodeUrl,
  ariaLabel = `Listen to ${title}`,
} = Astro.props;

const Tag = episodeUrl ? "a" : "article";
---

<Tag
  href={episodeUrl}
  aria-label={episodeUrl ? ariaLabel : undefined}
  class:list={[
    "group flex flex-col sm:flex-row items-start gap-4 sm:gap-6 p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 ease-in-out overflow-hidden max-w-2xl mx-auto",
    { "cursor-pointer focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-75": episodeUrl }
  ]}
>
  <div class="flex-shrink-0">
    <img
      src={imageUrl}
      alt={imageAlt}
      class="w-24 h-24 sm:w-32 sm:h-32 rounded-lg object-cover shadow-md group-hover:scale-105 transition-transform duration-300 ease-in-out"
      loading="lazy"
      width="128"
      height="128"
    />
  </div>
  <div class="flex flex-col justify-center flex-1 min-w-0"> {/* min-w-0 is important for text truncation */}
    <h3 class="text-lg sm:text-xl font-semibold text-slate-800 dark:text-slate-100 mb-1 group-hover:text-sky-600 dark:group-hover:text-sky-400 transition-colors">
      {title}
    </h3>
    <p class="text-sm sm:text-base text-slate-600 dark:text-slate-400 line-clamp-2 sm:line-clamp-3">
      {description}
    </p>
  </div>
</Tag>

<style>
  /* For browsers that don't support line-clamp, provide a fallback (optional) */
  @supports not (-webkit-line-clamp: 3) {
    .line-clamp-3 {
      /* Fallback if needed, e.g., max-height and overflow hidden */
      /* max-height: 4.5em; /* approx 3 lines for text-base */
      /* overflow: hidden; */
    }
  }
</style>
